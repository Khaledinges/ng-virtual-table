<div class="table">
  <div class="header" #headerDiv>
    <div *ngFor="let headerItem of column; let index = index" class="header-item" [style.maxWidth.px]="headerItem.width"
      [ngClass]="{
      'not-clickable': headerItem.sort === false,
      'asc': headerItem.sort === 'asc',
      'desc': headerItem.sort === 'desc',
      'resizable': headerItem.resizable,
      'active': headerItem.activeResize
      }"
      (click)="headerItem.sort !== false && applySort(headerItem.key)">{{
      headerItem.name
      }}
      <div class="grabber" *ngIf="headerItem.resizable" (click)="$event.stopPropagation()" (mouseup)="onResizeEnd($event, headerItem, index)"
        (mousedown)="onResizeStart($event, headerItem, index)" (mousemove)="onResizing($event, headerItem)" (mouseout)="onResizeEnd($event, headerItem, index)">
      </div>
    </div>
    <div *ngIf="config && config.filter" class="filter-spot" [ngClass]="[filterIsOpen ? 'open' : '']">
      <input #inputFilterFocus class="filter-spot-input" matInput [placeholder]="filterPlaceholder" [formControl]="filterControl">
      <mat-icon (click)="toggleFilter()">{{ filterIsOpen ? 'close' : 'filter_list' }}</mat-icon>
    </div>
  </div>
  <div class="virtual-table-content">
    <cdk-virtual-scroll-viewport *ngIf="!(isEmptySubject$ | async); else emptyContainer" [itemSize]="itemSize">
      <div *cdkVirtualFor="let item of _dataStream;templateCacheSize: 0" class="virtual-table-row" (click)="clickItem(item)">
        <div *ngFor="let headerItem of column" [style.maxWidth.px]="headerItem.width" class="virtual-table-column">
          <ng-container *ngIf="!headerItem.component;else dynamic">
            {{ getElement(item, headerItem.func) }}
          </ng-container>
          <ng-template #dynamic>
            <ndc-dynamic [ndcDynamicComponent]="headerItem.component.componentConstructor" [ndcDynamicInputs]="transformDynamicInput(headerItem.component.inputs, item)"
              [ndcDynamicOutputs]="headerItem.component.outputs || {}"></ndc-dynamic>
          </ng-template>
        </div>
      </div>
    </cdk-virtual-scroll-viewport>
    <ng-template #emptyContainer>
      <div class="virtual-table-content-empty">
        {{ dataSetEmptyPlaceholder }}
      </div>
    </ng-template>
  </div>
</div>